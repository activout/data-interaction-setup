version: '3.5'
secrets:
  mysql-client-key.pem:
    file: ./mysql/client-key.pem
  mysql-client-cert.pem:
    file: ./mysql/client-cert.pem
  mysql-server-ca.pem:
    file: ./mysql/server-ca.pem
services:
  web:
    restart: always
    build:
      context: .
    environment:
      - VIRTUAL_HOST=data-interaction-setup.activout.se
    env_file:
      - ./mysql.env
      - ./sendgrid.env
    secrets:
      - mysql-client-key.pem
      - mysql-client-cert.pem
      - mysql-server-ca.pem
    networks:
      - default
      - nginxproxy

networks:
  nginxproxy:
    external:
      name: nginxproxy_default
